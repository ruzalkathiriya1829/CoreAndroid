(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[66218,97215],{337445:(s,e,a)=>{a.d(e,{Oz:()=>r,nt:()=>n,v8:()=>t});const r={BUSINESS_ACCOUNT:"BUSINESS_ACCOUNT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",USER_ACCOUNT:"USER",AD_ACCOUNT:"AD_ACCOUNT",PROFILE:"PROFILE"},t="BUSINESS_PANEL",n="ASSET_PANEL"},813364:(s,e,a)=>{a.d(e,{F:()=>N,d:()=>S});var r=a(667294),t=a(616550),n=a(337445),i=a(872993),c=a(388011),u=a(583592),d=a(988014),_=a(245410),o=a(282802),l=a(739425),m=a(802071),E=a(897215),I=a(785893);const{Provider:A,useHook:S}=(0,u.Z)("AccountSwitcherContext"),N=({children:s})=>{const e=(0,t.useLocation)(),{params:{userBizId:a,businessHierarchyId:u,advertiserId:S,username:N}}=(0,t.useRouteMatch)(),y=e.search&&(0,l.mB)(e.search).advertiserId,b=(0,m.Z)(),p=(0,o.B)(),[h,T]=(0,r.useState)(""),[D,R]=(0,r.useState)({type:n.v8}),[C,O]=(0,r.useState)(!1),[v,P]=(0,r.useState)(null),[g,$]=(0,r.useState)(null),{checkExperiment:U}=(0,_.F)(),f=U("aid_exp_global_account_switcher_beta").anyEnabled,{logContextEvent:B}=(0,c.v)();(0,r.useEffect)((()=>{T(u||"")}),[u]),(0,r.useEffect)((()=>{const s=async({id:s,username:e})=>{const a=await(0,i.bG)({user_id:s,username:e});a&&P({type:s?n.Oz.BUSINESS_ACCOUNT:n.Oz.PROFILE,id:s||a.id,name:a.full_name,img:a.image_medium_url,username:e})};if(b.isAuth&&f)if(N)(null==v?void 0:v.username)!==N&&s({username:N}),(null==g?void 0:g.id)!==b.id&&$({id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||""});else if(!v){const r=S||y&&!(0,d.h3)(e);u?(async({id:s})=>{const e=await(0,i.p)({hierarchyId:s});P({id:s,name:null!=e&&e.data?e.data.name:"",img:null!=e&&e.data?e.data.image_medium_url:"",type:n.Oz.BUSINESS_HIERARCHY})})({id:u}):a?s({id:a}):r?(async({businessId:s,assetId:e})=>{if(s)try{const{data:{data:{asset:a,type:r}}}=await(0,E.G2)({businessId:s,assetId:e});P({id:e,name:a.name,img:"",type:r})}catch(a){P({id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||"",type:n.Oz.BUSINESS_ACCOUNT})}})({businessId:null==g?void 0:g.id,assetId:S||y}):P({type:n.Oz.BUSINESS_ACCOUNT,id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||""})}}),[v,b,p,u,a,N,S,y,g,f,e]),(0,r.useEffect)((()=>{var s,e;g||(null!==(s=p.advertiser)&&void 0!==s&&s.owner_user&&p.advertiser.owner_user_id?$({id:p.advertiser.owner_user_id||"",name:p.advertiser.owner_user.full_name||"",img:null!==(e=p.advertiser.owner_user.image_medium_url)&&void 0!==e?e:""}):$({id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||""}))}),[g,b,p.advertiser]);const G=(0,r.useMemo)((()=>({activePanel:D,selectedHierarchyId:h,switcherOpen:C,openAccountSwitcher:()=>{B({event_type:101,view_type:608,component:14346}),O(!0)},closeAccountSwitcher:()=>O(!1),openAssetPanel:s=>{R({type:n.nt,id:s})},closeAssetPanel:()=>{R({type:n.v8})},actingBusiness:g,selectedAccount:v,setSelectedAccount:P,setActingBusiness:$})),[h,D,C,v,g,B]);return(0,I.jsx)(A,{value:G,children:s})}},987892:(s,e,a)=>{a.d(e,{C:()=>S,H:()=>N});var r=a(667294),t=a(337445),n=a(872993),i=a(965533),c=a(914062),u=a(651009),d=a(583592),_=a(970588),o=a(245410),l=a(957286),m=a(802071),E=a(173969),I=a(785893);const{Provider:A,useHook:S}=(0,d.Z)("BusinessHierarchyContext"),N=({children:s})=>{const[e,a]=(0,r.useState)([]),[d,S]=(0,r.useState)(!0),[N,y]=(0,r.useState)({}),[b,p]=(0,r.useState)([]),h=(0,E.Z)(),T=(0,r.useRef)(h),D=(0,m.Z)(),{checkExperiment:R}=(0,o.F)(),C=R("web_m10n_business_hierarchy_alpha").anyEnabled,O=(0,r.useRef)({}),v=(0,r.useCallback)(((s,e)=>{let a;e===t.Oz.BUSINESS_HIERARCHY?a=(0,u.Z)(c.Q6.DASHBOARD,"","",s):e===t.Oz.BUSINESS_ACCOUNT&&(a=(0,u.Z)(c.Q6.DASHBOARD,s));const r=(0,l.Z)({site:"www",path:a});(0,i.Z)(r)}),[]),P=(0,r.useCallback)((async s=>{if(!C)return[];if(S(!0),O.current[s])return S(!1),O.current[s];{const e=await(0,_.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:s}}),{data:a}=e.resource_response,r=a&&a.map((s=>(s.children&&(s.children=s.children.map((s=>(s.user.entity_type=t.Oz.USER_ACCOUNT,s)))),s)))||[],i=/^\d+$/.test(s),c=new RegExp(s.toLowerCase(),"g"),u=(await T.current()).filter((e=>{if(i)return e.id.includes(s);return e.user.full_name.toLowerCase().match(c)})).map(n.IT),d=[...r.map((s=>s.id)),...u.map((s=>s.id))],o=i?(D.id||"").includes(s):(D.fullName||"").toLowerCase().match(c);return D.isAuth&&o&&d.push(D.id),O.current[s]=d,S(!1),d}}),[C,T,D.id,D.fullName,D.isAuth]),{id:g="",username:$="",email:U="",fullName:f="",imageSmallUrl:B="",imageMediumUrl:G="",isAuth:L}=D,w=(0,r.useCallback)((async()=>{if(S(!0),!L||!C)return void S(!1);const s=await(0,_.Z)({url:"ads/v4/business_access/business_hierarchies/"}),{data:e}=s.resource_response,r=e&&e.map((s=>(s.children&&(s.children=s.children.map((s=>(s.user.entity_type=t.Oz.USER_ACCOUNT,s)))),s)))||[];a(r);const i=await T.current();p(i.map(n.IT)),y((0,n.WP)({id:g,username:$,email:U,fullName:f,imageSmallUrl:B,imageMediumUrl:G})),O.current[""]=[...r.map((s=>s.id)),...i.map(n.IT).map((s=>s.id)),g],S(!1)}),[g,$,U,f,B,G,L,C,T]);(0,r.useEffect)((()=>{w()}),[w]);const Z=(0,r.useCallback)((s=>e.some((e=>e.id===s||e.children.some((e=>e.id===s||e.user.id===s))))),[e]),x=(0,r.useMemo)((()=>({businessHierarchies:[...N.id&&!Z(N.id)?[N]:[],...e,...b.filter((s=>!Z(s.id)))],switchAccount:v,searchAccounts:P,loadingAccounts:d,fetchData:w})),[e,v,P,b,d,N,w,Z]);return(0,I.jsx)(A,{value:x,children:s})}},872993:(s,e,a)=>{a.d(e,{IT:()=>u,Vq:()=>c,WP:()=>d,Yu:()=>l,bG:()=>o,p:()=>_});var r=a(690108),t=a(337445),n=a(970588),i=a(785893);const c=s=>({id:s.id,entity_type:t.Oz.BUSINESS_ACCOUNT,user:{id:s.user.id,entity_type:t.Oz.USER_ACCOUNT,username:s.user.username,email:s.user.email,full_name:s.user.full_name,image_small_url:s.user.image_small_url,image_medium_url:s.user.image_medium_url}}),u=s=>({id:s.id,entity_type:t.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:s.requires_mfa_for_roles,user:{id:s.user.id,entity_type:t.Oz.USER_ACCOUNT,username:s.user.username,email:s.user.email,full_name:s.user.full_name,image_small_url:s.user.image_small_url,image_medium_url:s.user.image_medium_url}}),d=s=>({id:s.id,entity_type:t.Oz.BUSINESS_ACCOUNT,user:{id:s.id,entity_type:t.Oz.USER_ACCOUNT,username:s.username,email:s.email,full_name:s.fullName,image_small_url:s.imageSmallUrl,image_medium_url:s.imageMediumUrl}}),_=async({hierarchyId:s})=>(await(0,n.Z)({url:`ads/v4/business_access/business_hierarchy/${s}/`})).resource_response,o=async({user_id:s,username:e})=>{if(!e&&!s)return null;const a=await r.Z.create("UserResource",{user_id:s,username:e}).callGet(),{resource_response:{data:t}}=a;return t},l=(0,i.jsx)("hr",{style:{borderTop:"1px solid #e9e9e9"}})},914062:(s,e,a)=>{a.d(e,{EF:()=>_,Hg:()=>p,Hl:()=>S,IR:()=>I,Je:()=>u,K3:()=>R,O1:()=>P,Q6:()=>l,QE:()=>r,V3:()=>b,Z4:()=>E,c7:()=>A,cU:()=>i,cg:()=>t,dZ:()=>n,gO:()=>N,j$:()=>y,j9:()=>C,pg:()=>g,pt:()=>D,qq:()=>v,sy:()=>d,tP:()=>h,uE:()=>m,vk:()=>O,we:()=>T,xX:()=>c,yR:()=>o});const r=3e3,t=300,n=500,i=1e4,c=250,u=50,d=50,_=20,o=20,l={DASHBOARD:"DASHBOARD",PEOPLE:"PEOPLE",PARTNERS:"PARTNERS",AD_ACCOUNTS:"AD_ACCOUNTS",AD_ACCOUNTS_PENDING_TAB:"AD_ACCOUNTS_PENDING_TAB",HISTORY:"HISTORY",PEOPLE_DETAIL:"PEOPLE_DETAIL",PARTNERS_DETAIL:"PARTNERS_DETAIL",SHARED_PARTNERS_DETAIL:"SHARED_PARTNERS_DETAIL",AD_ACCOUNTS_DETAIL:"AD_ACCOUNTS_DETAIL",PENDING_AD_ACCOUNTS_DETAIL:"PENDING_AD_ACCOUNTS_DETAIL",PEOPLE_INVITES:"PEOPLE_INVITES",PARTNERS_INVITES:"PARTNERS_INVITES",CHOOSER:"CHOOSER",PARTNERS_REQUEST_PAGE:"PARTNERS_REQUEST_PAGE",PARTNERS_INVITE_PAGE:"PARTNERS_INVITE_PAGE",PROFILES:"PROFILES",PROFILES_DETAIL:"PROFILES_DETAIL",PARTNERS_PENDING_TAB:"PARTNERS_PENDING_TAB",PEOPLE_PENDING_TAB:"PEOPLE_PENDING_TAB",USERS:"USERS",ACOUNTS:"ACCOUNTS",BUSINESS_SECURITY:"BUSINESS_SECURITY",SUPPORT_TOOL:"SUPPORT_TOOL",ASSETS:"ASSETS",ASSET_GROUPS:"ASSET_GROUPS",INVOICE_MANAGEMENT:"INVOICE_MANAGEMENT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",MANAGERS:"MANAGERS",AUDIENCES:"AUDIENCES",SHARED_TAGS:"SHARED_TAGS"},m={PARTNER:"PARTNER",PARTNER_ADMIN:"PARTNER_ADMIN"},E={ADVERTISER_OWNED_AD_ACCOUNT:"ADVERTISER_OWNED_AD_ACCOUNT",AGENCY_OWNED_AD_ACCOUNT:"AGENCY_OWNED_AD_ACCOUNT"},I={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},A={AD_ACCOUNT:"AD_ACCOUNT",PERSON:"PERSON",PARTNER:"PARTNER"},S={PERSON:"PERSON",PARTNER:"PARTNER",PROFILE:"PROFILE"},N={ADMIN:"ADMIN",ANALYST:"ANALYST",FINANCE_MANAGER:"FINANCE_MANAGER",AUDIENCE_MANAGER:"AUDIENCE_MANAGER",CAMPAIGN_MANAGER:"CAMPAIGN_MANAGER",CATALOGS_MANAGER:"CATALOGS_MANAGER"},y=["ADMIN","ANALYST","FINANCE_MANAGER","AUDIENCE_MANAGER","CAMPAIGN_MANAGER","CATALOGS_MANAGER"],b={EMPLOYEE:"EMPLOYEE",BIZ_ADMIN:"BIZ_ADMIN",OWNER:"OWNER"},p=["PROFILE_PUBLISHER"],h={AD_ACCOUNT:0,PROFILE:2,ASSET_GROUP:3},T={id:"0",is_pin_support_user:!0,biz_roles:[b.BIZ_ADMIN],business_roles:[b.BIZ_ADMIN],user:{username:"psupport",full_name:"Pinterest support",image_small_url:"https://i.pinimg.com/60x60_RS/f6/e9/3a/f6e93a06b500b2d87ffd32e1f56f7c6f.jpg",image_medium_url:"https://i.pinimg.com/150x150_RS/f6/e9/3a/f6e93a06b500b2d87ffd32e1f56f7c6f.jpg"}},D={ACTIVE:0,PENDING:1},R={ACTIVE:"active",PENDING:"pending"},C="filter_type",O={page:1,totalCount:0,limit:10,sortDirection:"ASCENDING",sortBy:void 0,searchBy:void 0,searchTerm:""},v={WARNING:"WARNING"},P={BUSINESS_INVITE_INVALID:2932,BUSINESS_ACCESS_PERSONAL_ACCOUNT:2936,INVALID_USERNAME:90,ACCESS_DENIED:280,BUSINESS_RELATIONSHIP_ALREADY_EXISTS:2751,BUSINESS_RELATIONSHIP_COUNT_EXCEEDED:2769,BUSINESS_NUMBER_MEMBERS_IN_POLICY_EXCEEDS:2938,INVALID_ODO_REQUEST:2755,BUSINESS_INVITE_STACKED_ERROR:2773,ACL_POLICY_NOT_FOUND:1110,BUSINESS_INVITE_NOT_EXIST:2770},g={ALL_TAGS:"ALL",OWNED:"OWNED",SHARED:"SHARED"}},651009:(s,e,a)=>{a.d(e,{Z:()=>n});const r="/business/business-access/",t="/business/business-hierarchy/",n=(s,e,a,n)=>{switch(s){case"DASHBOARD":return`${n?t:r}${String(null!=n?n:e)}/dashboard/`;case"PEOPLE":return`${r}${String(e)}/employees/`;case"PARTNERS":return`${r}${String(e)}/partners/`;case"AD_ACCOUNTS":return`${r}${String(e)}/ad-accounts/`;case"HISTORY":return`${r}${String(e)}/history/`;case"PEOPLE_DETAIL":return`${r}${String(e)}/employees/${String(a)}/details/`;case"PARTNERS_DETAIL":return`${r}${String(e)}/partners/${String(a)}/details/`;case"SHARED_PARTNERS_DETAIL":return`${r}${String(e)}/shared/${String(a)}/details/`;case"AD_ACCOUNTS_DETAIL":return`${r}${String(e)}/ad-accounts/${String(a)}/details/`;case"PENDING_AD_ACCOUNTS_DETAIL":return`${r}${String(e)}/ad-accounts/pending/${String(a)}/details/`;case"PEOPLE_INVITES":return`${r}${String(e)}/employees/invites/`;case"PEOPLE_PENDING_TAB":return`${r}${String(e)}/employees/pending/`;case"PARTNERS_PENDING_TAB":return`${r}${String(e)}/partners/pending/`;case"AD_ACCOUNTS_PENDING_TAB":return`${r}${String(e)}/ad-accounts/pending`;case"PARTNERS_INVITE_PAGE":return`${r}${String(e)}/partners/invites/`;case"PARTNERS_REQUEST_PAGE":return`${r}${String(e)}/partners/requests/`;case"PROFILES":return`${r}${String(e)}/profiles/`;case"PROFILES_DETAIL":return`${r}${String(e)}/profiles/${String(a)}/details/`;case"BUSINESS_SECURITY":return`${r}${String(e)}/security/`;case"SUPPORT_TOOL":return`${r}${String(e)}/support/`;case"ASSET_GROUPS":return a?`${r}${String(e)}/asset-groups/?asset_group_id=${String(a)}`:`${r}${String(e)}/asset-groups/`;case"INVOICE_MANAGEMENT":return`${r}${String(e)}/invoice-management/`;case"BUSINESS_HIERARCHY":return`${t}${String(n)}/hierarchy/`;case"MANAGERS":return`${t}${String(n)}/managers/`;case"AUDIENCES":return`${r}${String(e)}/audiences/`;case"SHARED_TAGS":return`${r}${String(e)}/shared-tags/`;default:return r}}},173969:(s,e,a)=>{a.d(e,{Z:()=>n});var r=a(970588),t=a(282802);function n(){const{experimentsClient:s}=(0,t.B)();return async()=>{var e;const{anyEnabled:a}=null!==(e=s.checkExperiment("business_access_employees_api_v4_migration"))&&void 0!==e?e:{},t=a?"/ads/v4/business_access/businesses/me/employers/":"ads/internal/business_access/users/me/employers/",n=await(0,r.Z)({url:t}),i=n.resource_response?n.resource_response.data:{data:[]};return await Promise.all(i&&i.data||[])}}},208576:(s,e,a)=>{a.d(e,{$2:()=>c,Ah:()=>d,IW:()=>i,Vs:()=>_,dF:()=>o,sl:()=>u});var r=a(914062),t=a(649655),n=a(664810);const i=(s={},e={})=>{if(s.limit||s.sortBy||s.sortDirection||s.searchTerm)return 0;if(s.page){const a=s.limit||e.limit;return((s.page||e.page)-1)*a}return e.startIndex||0},c=(s={},e)=>{if(s.limit||s.sortBy||s.sortDirection||s.searchTerm)return 0;if(s.page){const a=s.limit||e.limit;return((s.page||e.page)-1)*a}return e.startIndex},u=(s,e,a,r)=>{const{businessId:t,...n}=a,{...i}=r;return{id:s,...i,...n,searchBy:n.searchBy,searchTerm:n.searchTerm||i.searchTerm,limit:n.limit||i.limit,page:n.page||i.page,sortBy:n.sortBy||i.sortBy,sortDirection:n.sortDirection||i.sortDirection,startIndex:e,...0===e&&{page:1}}},d=(s,e)=>e.reduce(((e,a)=>({ids:e.ids.concat(s(a)),data:{...e.data,[s(a)]:a}})),{ids:[],data:{}}),_=(s,e)=>{var a,r,t,n,c;const u={page:null!==(a=s.page)&&void 0!==a?a:e.page,limit:null!==(r=s.limit)&&void 0!==r?r:e.limit,sortBy:null!==(t=s.sortBy)&&void 0!==t?t:e.sortBy,searchBy:s.searchBy,searchTerm:null!==(n=s.searchTerm)&&void 0!==n?n:e.searchTerm,sortDirection:null!==(c=s.sortDirection)&&void 0!==c?c:e.sortDirection},d=i(s,e);return{...u,startIndex:d,...0===d&&{page:1}}},o=async(s,e,a)=>{const i="PEOPLE"===a?n.JC:t.Eg,{data:{data:c=[],total_data_count:u}={}}=await i({...s,limit:r.xX,startIndex:0,id:s.id||""}),d=Math.ceil(u/r.xX);if(d<=1)return{data:{data:c,total_data_count:u}};const _=[...Array(d).keys()].slice(1);return{data:{data:(await Promise.allSettled(_.map((e=>i({...s,limit:r.xX,startIndex:e*r.xX}))))).reduce(((s,e)=>{var a,r;return null!==(a=e.value)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&r.data&&(s=s.concat(e.value.data.data)),s}),c),total_data_count:u}}}},897215:(s,e,a)=>{a.d(e,{ib:()=>E,vf:()=>A,jC:()=>I,oC:()=>m,W3:()=>N,fc:()=>v,cE:()=>b,xZ:()=>S,lo:()=>P,N1:()=>R,BG:()=>C,eo:()=>h,pI:()=>T,cp:()=>p,G2:()=>D,cR:()=>y,EB:()=>l});var r=a(758579),t=a(333872),n=a(914062),i=a(970588),c=a(649655),u=a(664810);const d=async(s,e,a,r=[])=>{const t={bookmark:void 0,data:{business_id:"",data:[]},...(await(0,i.Z)({url:s,method:"GET",data:e})).resource_response};if(!t.bookmark){return a(t.data).push(...r),t.data}return await d(s,{...e,bookmark:t.bookmark},a,r.concat(...a(t.data)))},_={get:(s,e={})=>d(s,e,(s=>s.data),[])};var o=a(404403);const l=async(s,e,a,r,t,n,i)=>"PARTNER"===t?await(0,c.SZ)({businessId:r,partnerId:s,assetId:a,roles:e,clientBusinessId:n,businessHierarchyNodeId:i}):await(0,u.Jg)({businessId:r,memberId:s,assetId:a,roles:e,businessHierarchyNodeId:i}),m=async(s,e,a,r)=>{if(0===e.length)return;const t=[];e.forEach((({assigneeIds:e,adAccountIds:n,roles:i})=>{0!==i.length&&e.forEach((e=>{n.forEach((n=>{t.push(l(e,i,n,s,a,void 0,r))}))}))})),await Promise.all(t)},E=async(s,e,a,r,t)=>{const n="PEOPLE"===r?"MEMBER_INVITE":"PARTNER_INVITE",c=e.reduce(((s,e)=>{const a=Object.keys(e)[0];return{...s,...Object.values(e)[0].includes("ADMIN")?{[a]:["ADMIN"]}:e}}),{}),u=a.map((e=>(0,i.Z)({url:`/ads/v4/business_access/businesses/${s}/invites/${e}/assets/access/`,method:"POST",data:{resource_id_to_roles:JSON.stringify(c),invite_type:n,business_hierarchy_node_id:t}})));await Promise.all(u)},I=async(s,e,a,r)=>{const t=(s=>s.reduce(((s,e)=>{const a=Object.keys(e)[0];return{...s,...Object.values(e)[0].includes("ADMIN")?{[a]:["ADMIN"]}:e}}),{}))(a);return(await(0,i.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/assets/access/`,method:"POST",data:{resource_id_to_roles:JSON.stringify(t),business_hierarchy_node_id:r}})).resource_response.data},A=async(s,e,a,r,t)=>{const n=e.reduce(((s,e)=>{const a=Object.keys(e)[0];return{...s,...Object.values(e)[0].includes("ADMIN")?{[a]:["ADMIN"]}:e}}),{}),c=a.map((e=>(0,i.Z)({url:`/ads/v4/business_access/businesses/${s}/invites/${e}/assets/access/`,method:"POST",data:{resource_id_to_roles:JSON.stringify(n),invite_type:r,business_hierarchy_node_id:t}})));await Promise.all(c)},S=async()=>(await(0,i.Z)({url:"ads/v4/advertisers/countries/",method:"GET"})).resource_response.data,N=async(s,e,a,r,n,c)=>(await(0,i.Z)({url:"/ads/v4/advertisers/",method:"POST",data:{owner_user_id:s,name:r,country:n,business_hierarchy_node_id:a,tos_id:c||(0,o.Fc)(t.tN[n]),...e&&{agency_user_id:e}}})).resource_response.data,y=async()=>{var s,e;const{anyEnabled:a}=null!==(s=null===(e=(0,r.Z)())||void 0===e?void 0:e.experimentsClient.checkExperiment("business_access_employees_api_v4_migration"))&&void 0!==s?s:{};if(a){var t;const s=null===(t=(await(0,i.Z)({url:"/ads/v4/business_access/businesses/me/employers/"})).resource_response.data)||void 0===t?void 0:t.data;return await Promise.all(s||[])}const n=(await _.get("ads/internal/business_access/users/me/employers/")).data;return await Promise.all(n||[])},b=async({id:s,limit:e,sortBy:a="name",searchBy:r="name",searchTerm:t="",startIndex:n=0,sortDirection:c="ASCENDING",forPartner:u=!1})=>(await(0,i.Z)({url:`/ads/internal/business_access/businesses/${String(s)}/all_assets/`,data:{limit:e,sort_by:a,search_by:r,start_index:n,search_value:t,sort_ascending:"ASCENDING"===c,for_partner:u}})).resource_response,p=async({id:s,limit:e,sortBy:a="name",sortDirection:r="ASCENDING",searchBy:t="name",searchTerm:c="",startIndex:u=0,forPartner:d})=>(await(0,i.Z)({url:`ads/internal/business_access/businesses/${s}/all_assets/`,data:{limit:e,sort_by:a,sort_ascending:"ASCENDING"===r,search_by:t,search_value:c,for_partner:d,start_index:u,type:n.tP.PROFILE}})).resource_response,h=async({id:s,assetIds:e,limit:a,type:r})=>(await(0,i.Z)({url:`ads/internal/business_access/businesses/${s}/batch_assets/`,method:"GET",data:{limit:a,type:r,assets_ids:e.join(",")}})).resource_response,T=async({businessId:s,assetIds:e,resourceType:a,limit:r,sortBy:t,sortDirection:n="ASCENDING",searchBy:c,searchTerm:u="",startIndex:d=0,filtersPayload:_})=>{const o=_&&Object.keys(_).length>0?{filters:JSON.stringify(_)}:{};return(await(0,i.Z)({url:`ads/v4/business_access/businesses/${s}/assets_by_ids`,data:{business_id:s,asset_ids:e,resource_type:a,page_size:r,sort_by:t,sort_direction:n,search_by:c,search_value:u,start_index:d,...o}})).resource_response},D=async({businessId:s,assetId:e})=>(await(0,i.Z)({url:`ads/internal/business_access/businesses/${s}/assets/${e}/`,method:"GET"})).resource_response,R=async({businessId:s,assetId:e,limit:a,sortBy:r,searchBy:t="full_name",searchTerm:n,startIndex:c,sortDirection:u})=>(await(0,i.Z)({url:`ads/internal/business_access/businesses/${s}/assets/${e}/partners/`,data:{limit:a,sort_by:r,search_by:t,start_index:c,search_value:n,sort_ascending:"ASCENDING"===u}})).resource_response,C=async({businessId:s,assetId:e,limit:a,sortBy:r,searchBy:t="full_name",searchTerm:n,startIndex:c,sortDirection:u})=>(await(0,i.Z)({url:`ads/internal/business_access/businesses/${s}/assets/${e}/members/`,data:{page_size:a,sort_by:r,search_by:t,start_index:c,search_value:n,sort_ascending:"ASCENDING"===u}})).resource_response,O=async({businessId:s,assetId:e,limit:a,sortBy:r="name",searchBy:t="name",searchTerm:n,startIndex:c,sortDirection:u,resourceType:d="ASSET_GROUP"})=>{const _=e?JSON.stringify({child_asset_id:e}):void 0;return(await(0,i.Z)({url:`/ads/v4/business_access/businesses/${s}/assets/`,data:{limit:a,sort_by:r,search_by:t,start_index:c,search_value:n,sort_ascending:"ASCENDING"===u,resource_type:d,filters:_}})).resource_response},v=async({id:s,businessId:e,assetId:a,limit:r,sortBy:t="name",searchBy:n="name",searchTerm:i,startIndex:c,sortDirection:u,resourceType:d="ASSET_GROUP"})=>O({id:s,businessId:e,assetId:a,limit:r,sortBy:t,searchBy:n,searchTerm:i,startIndex:c,sortDirection:u,resourceType:d}),P=async({id:s,businessId:e,limit:a,sortBy:r="name",searchBy:t="name",searchTerm:n,startIndex:i,sortDirection:c,resourceType:u="ASSET_GROUP"})=>O({id:s,businessId:e,limit:a,sortBy:r,searchBy:t,searchTerm:n,startIndex:i,sortDirection:c,resourceType:u})},649655:(s,e,a)=>{a.d(e,{Bq:()=>b,Cj:()=>m,Eg:()=>A,F0:()=>I,FA:()=>c,Jq:()=>l,K7:()=>E,M9:()=>p,OA:()=>D,Of:()=>y,SB:()=>N,SZ:()=>T,Zk:()=>o,c4:()=>S,ek:()=>d,h9:()=>h,qC:()=>u,w8:()=>_,wi:()=>R});var r=a(758579),t=a(914062),n=a(970588),i=a(208576);const c=async({businessId:s,requestIds:e,includeAssetSummary:a})=>{const r=await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/batch_partners/`,method:"GET",data:{partners:e,assets_summary:a}}),{data:{data:t}}={data:{},...r.resource_response};return t},u=async({businessId:s,requestIds:e,includeAssetSummary:a})=>{const r=await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/shared/batch_partners/`,method:"GET",data:{partners:e,assets_summary:a}}),{data:{data:t}}={data:{},...r.resource_response};return t},d=async(s,e)=>({data:[],business_id:"",partner_id:"",...(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/assets/`,method:"GET",data:{limit:t.cU}})).resource_response.data}),_=async(s,e)=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/asset_counts/`,method:"GET"})).resource_response.data,o=async({partnerId:s,role:e,businessId:a,businessHierarchyNodeId:r})=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${a}/partners/${s}/invite/`,method:"POST",data:{role_name:e,business_hierarchy_node_id:r}})).resource_response,l=async({partnerId:s,role:e,businessId:a})=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${a}/partners/${s}/invite/`,method:"POST",data:{role_name:e,type:"PARTNER_REQUEST"}})).resource_response,m=async({businessId:s,partnerId:e,businessHierarchyNodeId:a,role:r})=>(await(0,n.Z)({url:`/ads/internal/business_access/businesses/${s}/partners/${e}/`,method:"DELETE",data:{role_name:r,business_hierarchy_node_id:a}})).resource_response,E=async({businessId:s,partnerId:e,businessHierarchyNodeId:a,role:r,partner_type:t})=>(await(0,n.Z)({url:`/ads/v4/business_access/businesses/${s}/partners/${e}/`,method:"DELETE",data:{role_name:r,partner_type:t,business_hierarchy_node_id:a}})).resource_response,I=async({id:s,limit:e,sortBy:a="full_name",searchBy:r="full_name",searchTerm:t="",startIndex:i=0,sortDirection:c="ASCENDING",includeAssetSummary:u=!0})=>{const d={data:{data:[]},...(await(0,n.Z)({url:`/ads/internal/business_access/businesses/${s}/all_partners/`,method:"GET",data:{limit:e,sort_by:a,search_by:r,start_index:i,search_value:t,assets_summary:u?"true":"false",sort_ascending:"ASCENDING"===c}})).resource_response};return d.data.data=d.data.data.map((e=>{var a;return(null==e||null===(a=e.created_by_biz)||void 0===a?void 0:a.id)===s&&(e.isAgencyPartner=!0),e})),d},A=async({id:s,limit:e,sortBy:a="full_name",searchBy:r=["FULL_NAME","BUSINESS_ID","USERNAME"],searchTerm:t="",startIndex:i=0,sortDirection:c="ASCENDING",includeAssetSummary:u,partnerType:d,partners:_=[]})=>(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/partners/`,data:{page_size:e,sort_by:a,search_by:r,start_index:i,search_value:t,assets_summary:u?"true":"false",sort_ascending:"ASCENDING"===c,partner_type:d,partners:_}})).resource_response,S=async({businessId:s,partnerId:e,includeAssetSummary:a=!0})=>{var r,t;const i=await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/`,method:"GET",data:{assets_summary:a?"true":"false "}});if((null===(r=i.resource_response.data)||void 0===r||null===(t=r.created_by_biz)||void 0===t?void 0:t.id)===s){const s={data:{isAgencyPartner:void 0},...i.resource_response};return s.data.isAgencyPartner=!0,s}return i.resource_response},N=async({businessId:s,partnerId:e,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:c,sortDirection:u})=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/assets/`,method:"GET",data:{limit:a,sort_by:r,...i&&{search_by:t},start_index:c,search_value:i,sort_ascending:"ASCENDING"===u}})).resource_response,y=async({businessId:s,partnerId:e,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:c,sortDirection:u})=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/shared/${e}/assets/`,method:"GET",data:{limit:a,sort_by:r,...i&&{search_by:t},start_index:c,search_value:i,sort_ascending:"ASCENDING"===u}})).resource_response,b=async({businessId:s,partnerId:e,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:c,sortDirection:u})=>(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/partners/${e}/assets/`,method:"GET",data:{limit:a,sort_by:r,...i?{search_by:t}:{},start_index:c,search_value:i,sort_ascending:"ASCENDING"===u,resource_type:"ASSET_GROUP",partner_type:"INTERNAL"}})).resource_response,p=async(s,e,a=!1)=>{const r=(await(0,i.dF)({id:s,partnerType:"INTERNAL"},e,"PARTNER")).data.data,c=await Promise.all(r.map((async({id:e})=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/assets/`,method:"GET",data:{limit:t.cU,type:a?t.tP.PROFILE:t.tP.AD_ACCOUNT}})).resource_response.data)));return r.map(((s,e)=>({...s,assets:c[e].data})))},h=async({businessId:s,partnerId:e,assetId:a})=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/assets/${a}/`,method:"GET"})).resource_response,T=async({businessId:s,partnerId:e,assetId:a,roles:t,clientBusinessId:i,businessHierarchyNodeId:c})=>{var u,d;const{anyEnabled:_}=null!==(u=null===(d=(0,r.Z)())||void 0===d?void 0:d.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==u?u:{};if(_){return(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/partners/${e}/assets/${a}/access/`,method:"PUT",data:{permissions:t.includes("ADMIN")?["ADMIN"]:t,business_hierarchy_node_id:c,...i?{client_business_id:i}:{}}})).resource_response.data}return(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/assets/${a}/access/`,method:"PUT",data:{finalRoles:t.includes("ADMIN")?["ADMIN"]:t,business_hierarchy_node_id:c,...i?{client_business_id:i}:{}}})).resource_response.data},D=async({businessId:s,partnerId:e,assetId:a,businessHierarchyNodeId:t,partner_type:i="INTERNAL"})=>{var c,u;const{anyEnabled:d}=null!==(c=null===(u=(0,r.Z)())||void 0===u?void 0:u.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==c?c:{};if(d){return(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/partners/${e}/assets/${a}/access/`,method:"DELETE",data:{partner_type:i,business_hierarchy_node_id:t}})).resource_response.data}return(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/partners/${e}/assets/${a}/access/`,method:"DELETE",data:{partner_type:i,business_hierarchy_node_id:t}})).resource_response.data},R=async({businessId:s,assetId:e,limit:a,sortBy:r,searchBy:t="FULL_NAME",searchTerm:i,startIndex:c,sortDirection:u})=>(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/assets/${e}/partners/`,data:{page_size:a,sort_by:r,search_by:t,search_value:i,start_index:c,sort_ascending:"ASCENDING"===u}})).resource_response},664810:(s,e,a)=>{a.d(e,{GL:()=>N,JC:()=>m,Jg:()=>y,QC:()=>I,UQ:()=>d,bP:()=>b,dx:()=>_,kF:()=>p,kH:()=>l,kJ:()=>c,kY:()=>E,mZ:()=>A,n5:()=>S,p6:()=>o,p_:()=>u});var r=a(758579),t=a(914062),n=a(970588),i=a(678108);const c=async({businessId:s,requestIds:e,includeAssetSummary:a})=>{const r=await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/batch_members/`,method:"GET",data:{members:e,assets_summary:a,extend_info_from_user_api:!0}}),{data:{data:t}}={data:{data:{}},...r.resource_response};return t},u=async(s,e,a,r)=>({data:[],...(await(0,n.Z)({url:`ads/internal/business_access/businesses/${a}/members/batch_invite/`,method:"POST",data:{role_name:e,members:s,business_hierarchy_node_id:r}})).resource_response.data}),d=async(s,e,a)=>{const r={data:[],...(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/members/${e}/assets/`,method:"GET",data:{limit:t.cU,...Number.isInteger(a)&&{asset_permission_type:a}}})).resource_response.data}.data.map(i.P);return await Promise.all(r)},_=async(s,e,a,t)=>{var i,c;const{anyEnabled:u}=null!==(i=null===(c=(0,r.Z)())||void 0===c?void 0:c.experimentsClient.checkExperiment("business_access_employees_api_v4_migration"))&&void 0!==i?i:{},d=u?"v4":"internal";return{data:void 0,auxData:void 0,...(await(0,n.Z)({url:`ads/${d}/business_access/businesses/${s}/members/${e}/`,method:"DELETE",data:{...u?{business_role:a}:{role_name:[a]},business_hierarchy_node_id:t}})).resource_response.data}},o=async(s,e,a,t)=>{var i,c;const u=null!==(i=null===(c=(0,r.Z)())||void 0===c?void 0:c.experimentsClient.checkExperiment("business_access_employees_api_v4_migration").anyEnabled)&&void 0!==i&&i,d=u?{business_role:s}:{role_name:s};return(await(0,n.Z)({url:u?`ads/v4/business_access/businesses/${a}/members/${e}/`:`ads/internal/business_access/businesses/${a}/members/${e}/`,method:"PUT",data:{...d,...t?{business_hierarchy_node_id:t}:{}}})).resource_response.data},l=async({id:s,limit:e,filters:a,sortBy:r="full_name",searchBy:t="full_name",searchTerm:i="",startIndex:c=0,sortDirection:u="ASCENDING",includeAssetSummary:d})=>(await(0,n.Z)({url:`/ads/internal/business_access/businesses/${s}/members/`,method:"GET",data:{limit:e,filters:a?JSON.stringify(a):void 0,sort_by:r,search_by:t,start_index:c,search_value:i,assets_summary:d?"true":"false",sort_ascending:"ASCENDING"===u,extend_info_from_user_api:!0}})).resource_response,m=async({id:s,limit:e,filters:a,memberIds:r=[],sortBy:t="full_name",searchBy:i=["FULL_NAME","EMAIL","USERNAME"]||0,searchTerm:c="",startIndex:u=0,sortDirection:d="ASCENDING",includeAssetSummary:_})=>(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/members/`,data:{page_size:e,member_ids:r.length?r.join(","):void 0,filters:a?JSON.stringify(a):void 0,sort_by:t,search_by:i,start_index:u,search_value:c,assets_summary:_?"true":"false",sort_ascending:"ASCENDING"===d,extend_info_from_user_api:!0}})).resource_response,E=async({id:s})=>{var e,a;const t=null!==(e=null===(a=(0,r.Z)())||void 0===a?void 0:a.experimentsClient.checkExperiment("business_access_employees_api_v4_migration").anyEnabled)&&void 0!==e&&e;return(await(0,n.Z)({url:t?`/ads/v4/business_access/businesses/${s}/owner/`:`/ads/internal/business_access/businesses/${s}/owner/`})).resource_response.data},I=async({businessId:s,personId:e,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:c,sortDirection:u,assetPermissionType:d})=>{const _={limit:a,sort_by:r,search_by:t,start_index:c,search_value:i,sort_ascending:"ASCENDING"===u,...Number.isInteger(d)?{asset_permission_type:d}:{}};return(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/members/${e}/assets/`,data:_})).resource_response},A=async({businessId:s,personId:e,limit:a,sortBy:r,searchBy:i="name",searchTerm:c,startIndex:u,sortDirection:d,assetPermissionType:_})=>{const o={limit:a,sort_by:r,search_by:i,start_index:u,search_value:c,sort_ascending:"ASCENDING"===d,type:t.tP.PROFILE,...Number.isInteger(_)?{asset_permission_type:_}:{}};return(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/members/${e}/assets/`,data:o})).resource_response},S=async({businessId:s,personId:e,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:c,sortDirection:u,assetPermissionType:d})=>{const _={page_size:a,sort_by:r,search_by:t,start_index:c,search_value:i,sort_ascending:"ASCENDING"===u,resource_type:"ASSET_GROUP",asset_permission_type:d};return(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/members/${e}/assets/`,data:_})).resource_response},N=async({businessId:s,personId:e,assetId:a})=>(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/members/${e}/assets/${a}/`})).resource_response,y=async({businessId:s,memberId:e,assetId:a,businessHierarchyNodeId:t,roles:i})=>{var c,u;const{anyEnabled:d}=null!==(c=null===(u=(0,r.Z)())||void 0===u?void 0:u.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==c?c:{};if(d){return(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/members/${e}/assets/${a}/access/`,method:"PUT",data:{permissions:i.includes("ADMIN")?["ADMIN"]:i,business_hierarchy_node_id:t}})).resource_response.data}return(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/members/${e}/assets/${a}/access/`,method:"PUT",data:{finalRoles:i.includes("ADMIN")?["ADMIN"]:i,business_hierarchy_node_id:t}})).resource_response.data},b=async({businessId:s,memberId:e,assetId:a,businessHierarchyNodeId:t})=>{var i,c;const{anyEnabled:u}=null!==(i=null===(c=(0,r.Z)())||void 0===c?void 0:c.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==i?i:{};if(u){return(await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/members/${e}/assets/${a}/access/`,method:"DELETE",data:{business_hierarchy_node_id:t}})).resource_response.data}return(await(0,n.Z)({url:`ads/internal/business_access/businesses/${s}/members/${e}/assets/${a}/access/`,method:"DELETE",data:{business_hierarchy_node_id:t}})).resource_response.data},p=async({businessId:s,assetId:e,limit:a,sortBy:r,searchBy:t="FULL_NAME",searchTerm:i,startIndex:c,sortDirection:u})=>{const d=await(0,n.Z)({url:`ads/v4/business_access/businesses/${s}/assets/${e}/members/`,method:"GET",data:{page_size:a,sort_by:r,search_by:t,search_value:i,start_index:c,sort_ascending:"ASCENDING"===u}}),{data:_}={data:void 0,...d.resource_response};return _}},678108:(s,e,a)=>{a.d(e,{P:()=>n,b:()=>t});var r=a(690108);const t=async s=>{const e=await r.Z.create("UserResource",{user_id:s}).callGet(),{resource_response:{data:a}}=e;return a},n=async s=>{const{asset:e}=s,a=e.agency_user_id||e.owner_user_id,r=await t(a);return{...s,asset:{...e,creator:r.full_name}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/66218-99db25088908be48.mjs.map