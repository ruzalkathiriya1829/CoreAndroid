(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[99551],{946618:(e,r,n)=>{n.d(r,{Z:()=>o});var t=n(739425);const a=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,i=(e,r)=>r?e.substring(r.length).split("/")[0]:e,s=({boardUrl:e,path:r,pinId:n,pinnerUserName:s,query:o,search:l,storyPinDataId:c})=>{var d;if(!r)return"";let u="";switch(r){case"/":case"/homefeed/":return"UserHomefeedResource";case s&&`/${s}/pins/`:return"UserPinsResource";case s&&`/${s}/`:case/\/_activity\//.test(r)&&r:return"UserActivityPinsResource";case/\/_created\//.test(r)&&r:return c?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(r)&&r:return"UserDiscoveredPinsResource";case/\/_shop\//.test(r)&&r:return"StoreFrontFeedResource";case/\/_saved\//.test(r)&&r:return"BoardlessPinsResource";case s&&`/${s}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(r)&&r:return"VisualLiveSearchResource";case/\/pin\//.test(r)&&r:u="/pin/";const p=i(r,u);if(n!==p)return`RelatedPinFeedResource_${p}`;break;case/\/search\//.test(r)&&r:if(l){return`SearchResource_${((0,t.mB)(l,{shouldDecode:!1}).q||"").toLowerCase()}`}if(o)return`SearchResource_${encodeURIComponent(o.q||"").toLowerCase()}`;break;case/\/categories\//.test(r)&&r:u="/categories/";return`CategoryFeedResource_${i(r,u)}`;case/\/discover\/topics\//.test(r)&&r:return"CategoryFeedResource";case/\/news_hub\//.test(r)&&r:u="/news_hub/";return`NewsHubDetailsResource_${i(r,u)}`;case/\/_tools\/more-ideas\//.test(r)&&r:return"BoardContentRecommendationResource";case/\/topics\//.test(r)&&r:u="/topics/";return`TopicFeedResource_${i(r,u)}`;case s&&`/${s}/products/`:return"StoreFrontFeedResource";case/\/source\//.test(r)&&r:u="/source/";return`DomainFeedResource_${i(r,u)}`;case/\/explore\//.test(r)&&r:u="/explore/";return`SearchResource_${i(r,u)}`;case e:case!!e&&/\/more_ideas\//.test(r)&&r:return"BoardFeedResource";case e&&r.indexOf(e)>-1&&r:return"BoardSectionPinsResource";case/\/following\//.test(r)&&r:return"FollowingFeedResource";case/\/brand_catalog\//.test(r)&&r:return"BrandCatalogFeedResource";case a.test(r)&&r:return`TodayArticleFeedResource_${(null===(d=r.match(a))||void 0===d?void 0:d[2])||"unknown"}`;case/\/today\//.test(r):return"TodayTabResource";case/\story_feed\//.test(r)&&r:if(l){const{feed_type:e,request_params:r}=(0,t.mB)(l);return`StoryFeedResource_${e}_${r}`}}return""},o=({boardUrl:e,location:r,pinId:n,pinnerUserName:t,previousHistory:a,storyPinDataId:i,trackingParams:o,trackingParamsMap:l={}})=>{if(!n||!o||!r)return;if(!l)return`${null!=o?o:""}~0`;const{pathname:c,search:d,query:u}=r,p=s({boardUrl:e,path:c,pinId:n,pinnerUserName:t,query:u,search:d,storyPinDataId:i,trackingParams:o,trackingParamsMap:l}),m=Object.keys(l);let _;if((c||"").startsWith("/pin/")){const e=m.find((e=>"PinResource"!==e));_=e?l[e]:l.PinResource}else _=l[p];let h;if(!_&&a&&a.length){const r=(e=>{let r=null==e?void 0:e.pathname;return r?(r.match(/\/search\//)&&null!=e&&e.search&&(r+=e.search),r.toLowerCase()):""})(a[a.length-1].location);h=s({boardUrl:e,path:r,pinId:n,pinnerUserName:t,query:u,search:d,storyPinDataId:i,trackingParams:o,trackingParamsMap:l}),_=l[h]}return _||(_=`${o||""}~0`),_}},354428:(e,r,n)=>{n.d(r,{Se:()=>k,iw:()=>b,gV:()=>h,G3:()=>v,Gj:()=>P,Jd:()=>_,$3:()=>g});var t=n(965533),a=n(457628),i=n(791045),s=n(970588),o=n(250307);const l=e=>"string"!=typeof e&&e?e.state:null;var c=n(845098),d=n(48040),u=n(957733),p=n(625168),m=n(795142);const _=()=>{window&&window.focus(),document.activeElement&&document.activeElement.blur()},h=({isOffsiteUrl:e,event:r})=>!e&&(r.metaKey||r.ctrlKey),g=({location:e,pinId:r,surface:n})=>!!n&&!m.ZF.includes(n)||e.pathname.includes(r),k=(e,r)=>{var n,t;const s=Math.round(1e3*Math.random())+"",o=Math.round(1e3*Math.random())+"";a.t8((0,i.GS)(s),o);const l={token:`${s}-${o}`,url:e,...r&&!r.params?r.queryParams:{pin:null!==(n=null==r?void 0:r.params.pinId)&&void 0!==n?n:void 0,csr:null==r||!r.params.csrId||null!==(t=r.params)&&void 0!==t&&t.pinId?void 0:r.params.csrId,client_tracking_params:null==r?void 0:r.params.clientTrackingParams,aux_data:null!=r&&r.params.auxData?JSON.stringify(r.params.auxData):void 0}};return`/offsite/?${(0,c.Z)(l)}`},P=(e,r)=>{(0,t.Z)(k(e,r),!0)},b=async({clientTrackingParams:e,href:r,isMounted:n,pinId:t,spamCheckCallback:a})=>{const i=await(0,s.Z)({url:"/v3/offsite/",data:{check_only:!0,client_tracking_params:e,pin_id:t,url:r}});if(!i.resource_response.error&&n){const e=i.resource_response.data||{},{message:r,redirect_status:n,url:t}=e;a({blocked:["blocked","suspicious","porn"].includes(n),message:r,redirectStatus:n,sanitized_url:t})}},v=({event:e,onHistoryChange:r,href:n,history:a,target:i})=>{const s=(0,o.Z)(n),c=l(n),m=(0,d.Z)(s);m===p.Z.TRUSTED_DIFFERENT_ORIGIN||"blank"===i?(0,t.Z)(s,"blank"===i):a&&m===p.Z.SAME_ORIGIN&&(a.push((0,u.Z)({url:s}),null!=c?c:{}),r&&r({event:e}))}},599551:(e,r,n)=>{n.d(r,{Z:()=>p,p:()=>m});var t=n(667294),a=n(616550),i=n(946618),s=n(354428),o=n(300657),l=n(250307),c=n(28630),d=n(554318),u=n(935340);function p(e){var r,n,p;const{externalData:m,href:_,onHistoryChange:h,target:g}=e,[k,P]=(0,t.useState)(null),[b,v]=(0,t.useState)(!1),f=(0,a.useHistory)(),y=(0,a.useLocation)(),I=(0,l.Z)(_),S=(0,c.Z)({url:I}),{showWarning:R}=null!==(r=(0,d.s)())&&void 0!==r?r:{},{pin:w,surface:x}=m||{},A=w?(0,i.Z)({boardUrl:null===(n=w.board)||void 0===n?void 0:n.url,location:y,pinId:w.id,pinnerUserName:null===(p=w.pinner)||void 0===p?void 0:p.username,storyPinDataId:w.story_pin_data_id,trackingParams:w.tracking_params,trackingParamsMap:w.tracking_params_map}):null,D=(0,o.Z)();return(0,t.useEffect)((()=>(v(!0),()=>{v(!1)})),[]),(0,t.useEffect)((()=>{S&&w&&null===k&&b&&(!w.promoter||w.is_downstream_promotion)&&(0,s.$3)({location:y,pinId:w.id,surface:x})&&(0,s.iw)({clientTrackingParams:A,isMounted:b,pinId:w.id,spamCheckCallback:e=>P(e),href:I})}),[A,w,x,I,S,b,y,k]),({event:e})=>{var r;(0,s.gV)({isOffsiteUrl:S,event:e})||(e.preventDefault(),_?S||null!=m&&m.dangerouslyForceOffsiteUrl?D({auxData:null==m?void 0:m.auxData,clientTrackingParams:A,pin:(null==m?void 0:m.pin)&&{attributionSourceId:m.pin.attribution_source_id,campaignId:m.pin.campaign_id,isPromoted:m.pin.is_promoted,pinPromotionId:m.pin.pin_promotion_id},pinId:null==m||null===(r=m.pin)||void 0===r?void 0:r.id,queryParams:null==m?void 0:m.queryParams,showWarning:R,spamCheck:k,url:I}):(0,s.G3)({event:e,href:_,history:f,onHistoryChange:h,target:"blank"===g?"blank":null}):(0,u.nP)("link_navigation_empty_href",{sampleRate:1,tags:{route:y.pathname}}))}}const m=({children:e,...r})=>e({handleClick:p(r)})},300657:(e,r,n)=>{n.d(r,{Z:()=>d,t:()=>c});var t=n(758579),a=n(78309),i=n(969327),s=n(388011),o=n(354428),l=n(204926);const c=()=>{const{logContextEvent:e}=(0,s.v)();return({attributionSourceId:r,auxData:n,campaignId:s,clientTrackingParams:l,href:c,isPromoted:d,pinId:u,pinPromotionId:p})=>{var m;if(!d)return!1;const _=(0,t.Z)(),h=(0,o.Se)(c,{params:{pinId:u,csrId:null,clientTrackingParams:l,auxData:n}}),g=null!==(m=null==_?void 0:_.userAgent.browserName)&&void 0!==m?m:"";if((0,i.G6)(g)){var k,P;const{group:n}=null!==(k=null==_?void 0:_.experimentsClient.checkExperiment("m10n_event_conversion_measurement"))&&void 0!==k?k:{},t=null!=_&&null!==(P=_.userAgent)&&void 0!==P&&P.browserVersion?_.userAgent.browserVersion:"0.0",i=parseFloat(t.split(".")[0]+"."+t.split(".")[1]);if(r&&i>=14.1&&["enabled_safari"].includes(n))return((e,r,n)=>{const t=document.createElement("a");t.setAttribute("href",r),t.setAttribute("target","_blank"),t.setAttribute("rel","noopener nofollow noreferrer"),t.style.cursor="pointer",t.style.display="block",t.setAttribute(a.$N.ATTRIBUTION_SOURCE_ID,e),t.setAttribute(a.$N.ATTRIBUTE_DESTINATION,n),t.setAttribute(a.$N.ATTRIBUTE_ON,n),t.click()})(r,h,c),e({event_type:101,clientTrackingParams:l,object_id_str:u||"",aux_data:{pin_id:u||"",click_measurement_ppid:p||"",click_measurement_campaign_id:s||"",is_pcm:!0,attribution_source_id:r,page_url:c}}),!0}else if((0,i.i7)(g)){var b,v;const{group:n}=null!==(b=null==_?void 0:_.experimentsClient.checkExperiment("m10n_event_conversion_measurement_chrome"))&&void 0!==b?b:{},t=null!=_&&null!==(v=_.userAgent)&&void 0!==v&&v.browserVersion?parseInt(_.userAgent.browserVersion.split(".")[0],10):0;if(void 0!==r&&t>=101&&["enabled"].includes(n)){const n=null!=r?r:"0";return((e,r,n,t)=>{const i=new URLSearchParams;i.append(a.NR.SOURCE_EVENT_ID,e),i.append(a.NR.DESTINATION,n),i.append(a.NR.PRIORITY,a.NR.CLICK_PRIORITY),i.append(a.NR.EXPIRY,a.uV),t&&i.append(a.NR.CAMPAIGN_ID,t),i.append(a.NR.SOURCE_EVENT_TYPE,a.bC);const s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("target","_blank"),s.setAttribute("rel","noopener nofollow noreferrer"),s.style.cursor="pointer",s.style.display="block",s.setAttribute(a.NR.SOURCE,"/attribution_source/?"+i.toString()),s.click()})(n,h,c,s),e({event_type:101,clientTrackingParams:l,object_id_str:u||"",aux_data:{pin_id:u||"",click_measurement_ppid:p||"",click_measurement_campaign_id:s||"",is_arapi:!0,attribution_source_id:n,page_url:c}}),!0}}return!1}},d=e=>{const r=c();return({auxData:n,clientTrackingParams:t,pin:a,pinId:i,queryParams:s,showWarning:c,spamCheck:d,url:u})=>{"undefined"!=typeof window&&window.Windows?(0,l.Z)(u,{clientTrackingParams:t,pinId:i,hasPin:!!a,auxData:n}):a||null!=e&&e.isFromClickthroughLink?null!=d&&d.blocked?null==c||c(d):a&&r({attributionSourceId:a.attributionSourceId,auxData:n,campaignId:a.campaignId?String(a.campaignId):null,clientTrackingParams:t,href:u,isPromoted:a.isPromoted,pinId:i,pinPromotionId:a.pinPromotionId?String(a.pinPromotionId):null})||(0,o.Gj)(u,{params:{pinId:i,clientTrackingParams:t,auxData:n}}):(0,o.Gj)(u,s?{queryParams:s}:{params:{pinId:i}})}}},250307:(e,r,n)=>{n.d(r,{Z:()=>t});const t=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},957733:(e,r,n)=>{n.d(r,{Z:()=>i});const t=(e,r)=>0===e.lastIndexOf(r,0);var a=n(17330);const i=({url:e})=>{const r=(0,a.Z)("/");return t(e,r)?e.substr(r.length-1):e}},204926:(e,r,n)=>{n.d(r,{Z:()=>i});var t=n(970588),a=n(354428);function i(e,r){const{auxData:n,clientTrackingParams:i,hasPin:s,pinId:o}=r||{};(0,t.Z)({url:"/v3/offsite/",data:{check_only:!0,client_tracking_params:s?i:void 0,pin_id:o,url:e,aux_data:JSON.stringify(n)}}).then((r=>{if(r&&r.resource_response&&!r.resource_response.error){const{resource_response:e}=r,{redirect_status:n,url:t}=e.data;if(!["blocked","suspicious","porn"].includes(n)){if(window.Windows.Foundation&&window.Windows.System&&window.Windows.System.Launcher&&window.Windows.System.Launcher.launchUriAsync){const e=new window.Windows.Foundation.Uri(t);window.Windows.System.Launcher.launchUriAsync(e)}return}}(0,a.Gj)(e,{params:s?{pinId:o,clientTrackingParams:i,auxData:n}:{pinId:o}})}))}},795142:(e,r,n)=>{n.d(r,{UP:()=>o,Wv:()=>a,ZF:()=>t,zI:()=>i,zl:()=>s});const t=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],a=["ArticleProductsStory","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","RelatedProductsFeed","UserProfilePinGrid","ShoppingGridShippedMetadataWithVisitButton"],i=[...a,"ShoppingGridShippedMetadata","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ProductPinsFeed","ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid"],s=["ShoppingSquareGridDomain","ShoppingGridShippedMetadata","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingGridShippedMetadataWithVisitButton"],o=["BaseBoardPinGrid"]},554318:(e,r,n)=>{n.d(r,{Z:()=>g,s:()=>h});var t=n(667294),a=n(583592),i=n(608575),s=n(883119),o=n(88622),l=n(536042),c=n(630089),d=n(785893);const u=()=>{var e;const r=(0,l.ZP)(),{dismissWarning:n}=null!==(e=h())&&void 0!==e?e:{};return(0,d.jsx)(s.xu,{paddingX:3,children:(0,d.jsx)(s.zx,{fullWidth:!0,color:"red",onClick:n,text:r._('Okay', 'Dismiss a modal stating that clicking through to a link has been blocked', 'Dismiss a modal stating that clicking through to a link has been blocked')})})},p=()=>{const e=(0,l.ZP)();return(0,d.jsx)(s.xv,{inline:!0,weight:"bold",children:(0,d.jsx)(s.rU,{target:"blank",href:"https://policy.pinterest.com/community-guidelines#section-spam",display:"inlineBlock",underline:"hover",children:e._('Learn more', 'Link text leading to policy website', 'Link text leading to policy website')})})},m=({message:e,sanitized_url:r})=>{var n;const t=(0,l.ZP)(),{dismissWarning:a}=null!==(n=h())&&void 0!==n?n:{};return(0,d.jsx)(o.ZP,{accessibilityModalLabel:t._('We have blocked this link', 'Modal label when clicking a spammy link', 'Modal label when clicking a spammy link'),onDismiss:a,heading:t._('Heads up!', 'Modal heading when clicking through to a link has been blocked', 'Modal heading when clicking through to a link has been blocked'),footer:(0,d.jsx)(u,{}),children:(0,d.jsxs)(s.xu,{padding:6,children:[(0,d.jsx)(s.xv,{children:(0,c.nk)("{{ message }} {{ learnMore }}",{message:e,learnMore:(0,d.jsx)(p,{},"learnMoreLink")})}),(0,d.jsxs)(s.xu,{alignItems:"center",display:"flex",marginTop:4,children:[(0,d.jsx)(s.xu,{marginEnd:3,children:(0,d.jsx)(s.JO,{accessibilityLabel:t._('Blocked link address', 'Icon label preceding a block url', 'Icon label preceding a block url'),color:"error",icon:"report",inline:!0,size:24})}),(0,d.jsx)(s.xv,{inline:!0,lineClamp:1,weight:"bold",children:i.parse(r).hostname})]})]})})},{Provider:_,useMaybeHook:h}=(0,a.Z)("SpammyClickthrough");function g({children:e}){const[r,n]=(0,t.useState)(null),a=(0,t.useCallback)((()=>{n(null)}),[n]),i=(0,t.useCallback)((e=>{n(e)}),[n]),s=(0,t.useMemo)((()=>({dismissWarning:a,showWarning:i})),[a,i]);return(0,d.jsxs)(_,{value:s,children:[r&&(0,d.jsx)(m,{...r}),e]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/99551-fe7bb9e3e595ff90.mjs.map